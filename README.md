## Трекер тренувань і скілів калістеніки + трекер ваги

### Технології

- **React Native** з **Expo**
- **TypeScript**
- **Expo Router** для навігації
- **Supabase** для бекенду
- **Шрифт:** Inter (Google Fonts)

---

### Не авторизований користувач:

- **Вхід** ✅
  - Поля: Email, Пароль
  - Валідація: перевірка формату email та мінімальної довжини пароля
  - Кнопка "Увійти" з індикатором завантаження
  - Автоматичне перенаправлення на дашборд після успішного входу
  - Посилання на реєстрацію та відновлення пароля
  - Обробка помилок з відображенням повідомлень

- **Реєстрація** ✅
  - Поля: Ім'я, Email, Пароль, Підтвердження пароля
  - Валідація: збіг паролів, формат email, мінімальна довжина пароля
  - Кнопка "Зареєструватися" з індикатором завантаження
  - Після реєстрації автоматичний перехід на дашборд
  - Посилання на вхід для існуючих користувачів
  - Обробка помилок (дублікат email тощо)

- **Відновлення пароля** ✅
  - Екран 1: Введення email для відновлення
  - Екран 2: Підтвердження "Перевірте пошту" з інструкціями
  - Екран 3: Створення нового пароля (перехід через посилання з email)
  - Валідація email та нового пароля
  - Автоматичне перенаправлення на дашборд після успішної зміни
  - Можливість повернутися на екран входу

- **Підтвердження OTP** ✅
  - 8-значний код підтвердження з email
  - Поля: код OTP, новий пароль, підтвердження пароля
  - Валідація: перевірка довжини коду (8 цифр), збіг паролів, мінімальна довжина пароля
  - Відображення email, на який надіслано код
  - Кнопка "Змінити пароль" з індикатором завантаження
  - Автоматичне перенаправлення на дашборд після успішної зміни
  - Обробка помилок (невірний/застарілий код)

---

### Авторизований користувач:

#### **1. Дашборд** ❌

**Основні елементи:**

- Поточна дата і день тижня
- Наступне заплановане тренування (назва, час, кількість вправ)
- Кнопка "Почати тренування" (велика, помітна)
- Статистика тижня:
  - Виконано тренувань: X/Y
  - Загальний час тренувань
  - Streak (скільки днів поспіль тренуєшся)
- Міні-графік ваги (за останній тиждень/місяць)
- Швидкий доступ до останнього тренування
- Прогрес до цілі

**Статистика загальна:**

- Дата реєстрації
- Загальна кількість тренувань
- Загальний час тренувань
- Найдовший streak
- Досягнення/бейджі

---

#### **2. Програма тренувань** ❌

**Створення програми:**

- Додавання днів
- Для кожного дня додати вправи зі списку
- Налаштування для кожної вправи:
  - Кількість підходів
  - Кількість повторень або час
  - Час відпочинку між підходами

**Перегляд програми:**

- Список по днях
- Редагування/видалення днів
- Позначка виконаних тренувань

**Активне тренування:**

- Таймер для кожної вправи
- Таймер відпочинку між підходами
- Чекбокси для відмітки виконаних підходів
- Можливість додати нотатки (відчуття, важко/легко)
- Кнопка "Завершити тренування"
- Можливість пропустити вправу

---

#### **3. Скіли** ❌

**Функціонал:**

- Список скілів калістеніки (підтягування, віджимання, планка, стійка на руках, human flag, muscle-up, тощо)
- Для кожного скілу:
  - Поточний рівень (початковий, середній, просунутий)
  - Прогресія (наприклад: негативні підтягування → 1 підтягування → 5 → 10)
  - Відео або GIF демонстрація
  - Опис техніки
  - Рекомендовані вправи для досягнення
  - Історія прогресу (графік або список досягнень)
- Встановлення цілі для скілу
- Нотифікації про досягнення нового рівня

---

#### **4. Вправи** ❌

**Список вправ:**

- Фільтри по групі м'язів (спина, груди, ноги, прес, плечі)
- Фільтри по складності (легкі, середні, важкі)

**Детальна інформація про вправу:**

- Назва
- Зображення або GIF/відео
- Опис техніки виконання
- Працюючі м'язи (primary, secondary)
- Рівень складності
- Поради та поширені помилки
- Мета у вправі (наприклад зробити 15 раз) і чи досягнута
- Історія виконання (коли і скільки разів робив)

**Додавання власних вправ:**

- Назва, опис
- Завантаження фото
- Вибір групи м'язів

---

#### **5. Вага** ✅

**Головний екран (Dashboard):**

- Фільтр періодів для відображення даних:
  - Місяць
  - 3 місяці
  - Рік
  - Весь час
- Графік ваги:
  - Лінійний графік з плавними кривими (bezier)
  - Автоматична агрегація даних (максимум 12 точок для кращої читабельності)
  - Групування та усереднення записів при великій кількості даних
  - Відображення ваги та дат на осях
- Секція останніх записів:
  - Відображення обмеженої кількості останніх записів
  - Кнопка "Показати всі" для переходу до повної історії (якщо записів більше ніж відображається)
  - Для кожного запису: дата, вага, зміна відносно попереднього запису
- Стани інтерфейсу:
  - Індикатор завантаження при отриманні даних
  - Повідомлення про помилку при невдалому завантаженні
  - Порожній стан з підказкою, якщо записів немає
- Кнопка додавання запису в header екрана

**Додавання запису:**

- Поля форми:
  - Вага (кг) - числове поле з клавіатурою для десяткових чисел
  - Дата - вибір через вбудований date picker (inline режим)
- Валідація:
  - Перевірка наявності значення ваги
  - Максимальна дата - поточна (неможливо додати запис на майбутню дату)
  - Заборона дублікатів за ту саму дату (помилка при спробі додати другий запис на ту саму дату)
- Кнопки:
  - "Зберегти" - збереження запису з індикатором завантаження
  - "Скасувати" - повернення на попередній екран
- Автоматичне оновлення даних після збереження
- Автоматичне оновлення нагадувань про зважування після додавання запису

**Редагування запису:**

- Завантаження існуючих даних запису при відкритті форми
- Ті самі поля та валідація, що й при додаванні
- Оновлення запису в базі даних
- Автоматичне оновлення даних та нагадувань після збереження

**Історія записів:**

- Повний список всіх записів користувача
- Сортування за датою (найновіші зверху)
- Для кожного запису відображається:
  - Дата у повному форматі
  - Вага (кг)
  - Зміна ваги відносно попереднього запису:
    - Позитивна зміна (зеленим кольором) - якщо вага збільшилась
    - Негативна зміна (червоним кольором) - якщо вага зменшилась
    - Відображення зі знаком "+" для позитивних змін
    - Округлення до 1 знаку після коми
- Дії з записами:
  - Редагування - кнопка з іконкою олівця
  - Видалення - кнопка з іконкою кошика (з підтвердженням через Alert)
- Pull-to-refresh для оновлення списку
- Стани інтерфейсу:
  - Індикатор завантаження при першому завантаженні
  - Повідомлення про помилку при невдалому завантаженні
  - Порожній стан з підказкою, якщо записів немає

**Розрахунки та логіка:**

- Розрахунок зміни ваги:
  - Порівняння поточного запису з попереднім (хронологічно)
  - Відображення різниці в кілограмах
  - Для першого запису зміна = 0
- Фільтрація за періодами:
  - Відбір записів за обраним періодом від поточної дати назад
  - Підтримка періодів: місяць, 3 місяці, рік, весь час
- Агрегація даних для графіка:
  - Групування записів при кількості більше 12
  - Усереднення ваги в межах групи
  - Використання найпізнішої дати з групи
  - Округлення ваги до 1 знаку після коми

**Інтеграція з нагадуваннями:**

- Автоматичне оновлення нагадувань про зважування після додавання, редагування або видалення запису
- Візуальний індикатор на табі "Вага":
  - Бейдж зі знаком "!" відображається на табі, якщо:
    - У користувача немає жодного запису ваги
    - Останній запис ваги був більше 7 днів тому
  - Бейдж автоматично зникає після додавання нового запису ваги
  - Перевірка стану відбувається автоматично при завантаженні додатку та після оновлення записів

---

#### **6. Профіль** ✅

**Особиста інформація:**

- Ім'я (зберігається в user_metadata при реєстрації, можна редагувати)
- Email
- Вийти

---

### Додаткові функції:

#### **7. Історія тренувань** ❌

- Календар з позначками виконаних тренувань
- Детальна інформація про кожне тренування

#### **8. Досягнення/Бейджі** ❌

- Система нагород за streak, кількість тренувань, досягнення скілів
- Візуальні бейджі

#### **9. Нотифікації** ❌

- Нагадування про тренування
- Нагадування про зважування

---

### Структура бази даних (Supabase):

**Таблиці:**

- `auth.users` - вбудована таблиця користувачів (використовується user_metadata для зберігання імені та ролі)
- `exercises` - вправи
- `skills` - скіли калістеніки
- `programs` - програми тренувань
- `program_days` - дні програми
- `program_exercises` - вправи в дні програми
- `workouts` - виконані тренування
- `workout_exercises` - вправи в тренуванні
- `weight_logs` - записи ваги
- `skill_progress` - прогрес скілів
- `achievements` - досягнення користувачів
